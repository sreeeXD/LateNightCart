{% extends "base.html" %}
{% block title %}Manage Snacks - LateNightCart{% endblock %}
{% block content %}

<section class="px-4 md:px-10 pt-24 pb-16 min-h-screen">

  <!-- Header -->
  <div class="text-center mb-10">
    <h1 class="text-4xl md:text-5xl font-extrabold text-yellow-400 glow-text mb-2">
      Manage Snacks
    </h1>
    <p class="text-gray-400">Add, update, or remove snacks from your hostel store.</p>
  </div>

  <!-- Add New Snack Form -->
  <div class="bg-gray-800/80 backdrop-blur-lg border border-gray-700 rounded-2xl p-8 shadow-2xl mb-12 max-w-2xl mx-auto">
    <h2 class="text-2xl font-bold text-yellow-400 mb-6 text-center">Add New Snack</h2>
    <form method="POST" action="{{ url_for('manage_snack') }}" enctype="multipart/form-data" class="space-y-5">

      <div>
        <label for="name" class="block text-sm text-gray-300 mb-2">Snack Name</label>
        <input type="text" name="name" id="name" placeholder="e.g. Lays, KitKat, Maggie"
               class="w-full px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg
                      focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white" required>
      </div>

      <div>
        <label for="price" class="block text-sm text-gray-300 mb-2">Price (‚Çπ)</label>
        <input type="number" name="price" id="price" placeholder="e.g. 20"
               class="w-full px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg
                      focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white" required>
      </div>

      <div>
        <label for="quantity" class="block text-sm text-gray-300 mb-2">Quantity</label>
        <input type="number" name="quantity" id="quantity" placeholder="e.g. 10"
               class="w-full px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg
                      focus:outline-none focus:ring-2 focus:ring-yellow-400 text-white" required>
      </div>

      <div>
        <label for="image" class="block text-sm text-gray-300 mb-2">Snack Image (optional)</label>
        <input type="file" name="image" id="image"
               class="w-full text-gray-300 bg-gray-900 border border-gray-700 rounded-lg
                      file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0
                      file:bg-yellow-500 file:text-black hover:file:bg-yellow-400 transition">
      </div>

      <button type="submit"
              class="w-full bg-yellow-500 hover:bg-yellow-400 text-black font-semibold py-2 rounded-lg transition duration-200">
        ‚ûï Add Snack
      </button>
    </form>
  </div>

  <!-- Existing Snacks List -->
  <div>
    <h2 class="text-2xl font-bold text-yellow-400 mb-6 text-center">Current Snacks</h2>

    {% if snacks %}
    <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 justify-items-center">
      {% for snack in snacks %}
      <div class="bg-gray-800/80 backdrop-blur-lg p-5 rounded-2xl shadow-lg border border-gray-700 hover:scale-105 hover:shadow-yellow-500/20 transition duration-300 w-72">
        <img src="{{ snack.image_url or '/static/images/default.jpg' }}" alt="{{ snack.name }}"
             class="rounded-xl w-full h-40 object-cover mb-4 border border-gray-700">
        <h3 class="text-xl font-bold text-yellow-400 mb-1">{{ snack.name }}</h3>
        <p class="text-gray-300 mb-1">‚Çπ{{ '%.2f' | format(snack.price) }}</p>
        <p class="text-gray-400 text-sm mb-4">Stock: {{ snack.quantity }}</p>

        <div class="flex justify-between space-x-2">
          <a href="{{ url_for('edit_snack', snack_id=snack.id) }}"
             class="flex-1 bg-blue-500 hover:bg-blue-400 text-black font-semibold py-1 rounded-lg text-center transition">Edit</a>
          <a href="{{ url_for('delete_snack', snack_id=snack.id) }}"
             onclick="return confirm('Are you sure you want to delete {{ snack.name }}?');"
             class="flex-1 bg-red-500 hover:bg-red-400 text-black font-semibold py-1 rounded-lg text-center transition">Delete</a>
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
      <p class="text-center text-gray-400 mt-10">No snacks added yet üç™</p>
    {% endif %}
  </div>
</section>

{% endblock %}
