{% extends "base.html" %}

{% block title %}Snack Menu{% endblock %}

{% block content %}
<div class="container mx-auto p-4 py-8">
    <h1 class="text-4xl font-bold text-center mb-10 text-custom-black">Our Delicious Snacks</h1>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
        {% for snack in snacks %}
            {% set is_sold_out = not snack.is_available or snack.quantity == 0 %}
            <div class="bg-custom-white border border-custom-dark-olive rounded-lg shadow-md overflow-hidden transition-shadow duration-300 {% if is_sold_out %} opacity-60 {% else %} hover:shadow-lg {% endif %}">
                <img src="{{ snack.image_url }}" alt="{{ snack.name }}" class="w-full h-48 object-cover {% if is_sold_out %} grayscale {% endif %}">
                <div class="p-4">
                    <h2 class="text-xl font-semibold text-custom-black mb-2">{{ snack.name }}</h2>
                    <p class="text-custom-bright-olive text-lg font-bold mb-2">â‚¹ {{ "%.2f"|format(snack.price) }}</p>

                    {% if is_sold_out %}
                        <p class="text-red-600 text-sm mb-4 font-semibold">Sold Out!</p>
                        <button class="w-full bg-gray-400 text-white py-2 rounded-md cursor-not-allowed" disabled>Order</button>
                    {% else %}
                        <p class="text-custom-medium-olive text-sm mb-4">Quantity available: <span class="font-semibold">{{ snack.quantity }}</span></p>
                        <a href="{{ url_for('order', snack_id=snack.id) }}" class="w-full bg-custom-accent text-black py-2 rounded-md hover:bg-green-600 transition duration-300 block text-center font-semibold">
                            Order Now
                        </a>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}